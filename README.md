# Simple Telegram Bot

Простой учебный Telegram-бот на Python.

## Возможности

* Обработка **основных команд**:

  | Команда        | Описание                                   |
  | -------------- | ------------------------------------------ |
  | `/start`       | Приветственное сообщение и клавиатура      |
  | `/help`        | Список доступных команд                    |
  | `/about`       | Информация о боте                          |
  | `/sum`         | Суммирование чисел                         |
  | `/max`         | Поиск максимального числа                  |
  | `/confirm`     | Подтверждение действия через inline-кнопки |
  | `/weather`     | Погода в Москве (API Open-Meteo)           |
  | `/hide`        | Скрыть клавиатуру                          |
  | `/show`        | Показать клавиатуру                        |
  | `/add_note`    | Добавить заметку                           |
  | `/list_notes`  | Список всех заметок (с пагинацией)         |
  | `/find_note`   | Найти заметку по тексту (с пагинацией)     |
  | `/edit_note`   | Изменить текст заметки по ID               |
  | `/delete_note` | Удалить заметку по ID                      |
  | `/count_notes` | Посчитать количество заметок               |

* Поддержка **reply-клавиатуры**:

  * `Погода`
  * `Сумма`
  * `О боте`
  * `Помощь`
  * `Скрыть клавиатуру`

* Поддержка **inline-кнопок**:

  * `Да / Нет` — подтверждение действий
  * Кнопки **«След. стр.» / «Пред. стр.»** — навигация по заметкам

* Работа с **заметками** (через модуль `db`):

  * добавление, редактирование, удаление;
  * поиск по тексту;
  * пагинация при большом количестве заметок.

* **Погода в Москве** через API [Open-Meteo](https://open-meteo.com/).

* **Логирование** в файл и консоль с настройкой уровня логов (`INFO`, `DEBUG`, `ERROR`).

* **Конфигурация через `.env`** — токен, путь к БД, файл логов и уровень логирования.

---

##️ Установка и запуск

### 1. Клонировать репозиторий

```bash
git clone https://github.com/ArsKF/tg-bot-simple.git
cd tg-bot-simple
```

### 2. Создать и активировать виртуальное окружение

```bash
python -m venv venv
source venv/bin/activate   # Linux/macOS
venv\Scripts\activate      # Windows
```

### 3. Установить зависимости

```bash
pip install -r requirements.txt
```

### 4. Настроить переменные окружения

Скопировать пример и отредактировать `.env`:

```bash
cp .env.example .env
```

Файл `.env`:

```env
TOKEN="токен_от_BotFather"
DB_PATH=/path/to/db
LOG_FILE="./bot.log"
LOG_LEVEL="INFO"
```

### 5. Запустить бота

```bash
python main.py
```

---

## Примеры использования

### Добавление заметки

```
/add_note Купить хлеб
```

### Список заметок

```
/list_notes
```

Если заметок больше 10 — появятся кнопки **«След. стр.» / «Пред. стр.»**.

### Поиск заметок

```
/find_note хлеб
```

Если заметок больше 10 — появятся кнопки **«След. стр.» / «Пред. стр.»**.

### Редактирование заметки

```
/edit_note 1 Купить молоко
```

### Удаление заметки

```
/delete_note 1
```

### Количество заметок

```
/count_notes
```

### Погода

```
/weather
```

---

## Примеры числовых команд

| Команда | Пример       | Ответ         |
| ------- | ------------ | ------------- |
| `/sum`  | `/sum 1 5 7` | `Сумма: 13`   |
| `/max`  | `/max 2 9 4` | `Максимум: 9` |

---

## Структура проекта

```
tg-bot-simple/
├── main.py          # Основной файл бота
├── db.py            # Работа с базой данных (заметки)
├── config.py        # Конфигурация и логирование
├── .env.example     # Пример конфигурации окружения
├── requirements.txt # Зависимости
└── README.md        # Документация
```

---

## Логирование

Все события записываются:

* в консоль;
* в файл (см. `LOG_FILE`).

Формат логов:

```
2025-09-18 12:34:56 - telegram-bot - INFO - Telegram Bot started.
```

---

## Используемые библиотеки

* [pyTelegramBotAPI (telebot)](https://github.com/eternnoir/pyTelegramBotAPI)
* [requests](https://docs.python-requests.org/)
* [python-dotenv](https://pypi.org/project/python-dotenv/)
* [sqlite3](https://docs.python.org/3/library/sqlite3.html)

---

## Автор

Агаев Арсений Валерьевич
ID: 1032221668
